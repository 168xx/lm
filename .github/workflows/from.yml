name: Remove URLs from tv.txt  
  
on:  
  push:  
    branches:  
      - main  # 根据需要更改分支名称  
  
jobs:  
  remove-urls:  
    runs-on: ubuntu-latest  
  
    steps:  
      - name: Checkout repository  
        uses: actions/checkout@v2  
  
      - name: Set up environment  
        run: |  
          # 确保工作目录是干净的  
          git config --global user.name 'github-actions'  
          git config --global user.email 'github-actions@github.com'  
  
      - name: Remove URLs from tv.txt  
        run: |  
          # 使用 sed 命令删除包含 http:// 或 https:// 的行，并将结果保存到 tt.txt  
          sed -n '/http:\/\/\|https:\/\//!p' tv.txt > tt.txt  
  
      - name: Commit and push changes  
        run: |  
          # 检查是否有更改  
          if [ -n "$(git status --porcelain)" ]; then  
            # 添加更改  
            git add tt.txt  
            # 提交更改  
            git commit -m "Removed URLs from tv.txt and saved to tt.txt"  
            # 推送到仓库  
            git push  
          else  
            echo "No changes to commit"  
          fi